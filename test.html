<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Test Firebase</title>
  <script type="module">
    // 1) Importa i moduli Firebase direttamente dal CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.17.0/firebase-app.js";
    import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.17.0/firebase-firestore.js";

    // 2) La tua configurazione
    const firebaseConfig = {
      apiKey: "TUO_API_KEY",
      authDomain: "TUO_AUTH_DOMAIN",
      projectId: "TUO_PROJECT_ID",
      storageBucket: "TUO_STORAGE_BUCKET",
      messagingSenderId: "TUO_MESSAGING_SENDER_ID",
      appId: "TUO_APP_ID"
    };

    // 3) Inizializzo app e DB
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 4) Funzione di test: scrive e poi legge
    async function testFirestore() {
      // crea un documento di prova
      const docRef = await addDoc(collection(db, "items"), { text: "prova da test.html", ts: Date.now() });
      console.log("Documento creato con ID:", docRef.id);

      // leggi tutti i documenti
      const snap = await getDocs(collection(db, "items"));
      console.log("Tutti i documenti in 'items':");
      snap.forEach(doc => console.log(doc.id, doc.data()));
    }

    // 5) Al caricamento della pagina eseguo il test
    window.addEventListener("DOMContentLoaded", testFirestore);
  </script>
</head>
<body>
  <h1>Test Firebase Firestore</h1>
  <p>Apri la console del browser (F12) per vedere i log del test.</p>
</body>
</html>
